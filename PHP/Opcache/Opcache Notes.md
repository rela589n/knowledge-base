## Opcache

Когда запускается PHP, создаётся сегмент памяти для хранения всех данных opcache.
Этот сегмент никогда не освобождает память. При переполнении, он пересоздаётся полностью. Этого не стоит допускать, так как это создаёт блокировки.

Общая память используется:

- структура скриптов и опкоды
- хранение таблицы указателей всех строк
- хеш-таблица кешированных скриптов
- прочие значения, нужные для работы OPCache

OPCache блокирует общую память на время записи.

Для каждого скрипта используется полный путь к нему. Если используются относительные пути, это может привести к проблемам кеширования ключей когда в пути есть симлинки. Если линк изменится, то будет выполнен не тот скрипт.  Поэтому их назначение нельзя менять.

Realpath-cache очищается только при закрытии FPM.

Нужно избегать кеширования "динамических" файлов php.
